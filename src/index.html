<!-- Template used as a start point to construct this WebSite: Template 2019 The Card http://www.tooplate.com/view/2109-the-card -->
<!-- D3 Charts ideas where obtained from: https://www.d3-graph-gallery.com -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Museus de Portugal</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600"
    />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/magnific-popup.css" />
    <link rel="stylesheet" href="css/tooplate-style.css" />
  </head>

  <body>
    <div id="loader-wrapper">
      <div id="loader"></div>
      <div class="loader-section section-left"></div>
      <div class="loader-section section-right"></div>
    </div>

    <div class="tm-main-container">
      <div class="tm-top-container">
        <!-- Menu -->
        <nav id="tmNav" class="tm-nav">
          
          <ul class="tm-nav-links">
            <li class="tm-nav-item active">
              <a href="#" data-linkid="0" data-align="right" class="tm-nav-link">Intro</a>
            </li>
            <li class="tm-nav-item">
              <a href="#" data-linkid="1" data-align="right" class="tm-nav-link">Tipos</a>
            </li>
            <li class="tm-nav-item">
              <a
                href="#"
                data-linkid="2"
                data-align="middle"
                class="tm-nav-link">Regiões</a>
            </li>
            <li class="tm-nav-item">
              <a href="#" data-linkid="3" data-align="left" class="tm-nav-link">Visitantes</a>
            </li>
          </ul>
        </nav>
        <!-- Site header -->
      <header class="tm-site-header-box tm-bg-dark">
            <h1 class="tm-site-title">Museus de Portugal</h1>
            <p class="mb-0 tm-site-subtitle">Estatísticas relevantes de 2015-2018</p>
      </header>
      </div>
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-12"> 
            <!-- Site content -->
            <div class="tm-content">
              <!-- Introduction page -->
              <section class="tm-section tm-section-0">
                <h2 class="tm-section-title mb-3 font-weight-bold">
                  Introdução
                </h2>
                <div class="tm-textbox tm-bg-dark">
                  <p style="font-size: 17px;">
                    São apresentados alguns dados estatísticos, recolhidos pelo Instituto Nacional de Estatística através dos Inquéritos anuais aos Museus em Portugal, referentes aos anos entre 2015 e 2018. 
                  </p>
                  <p style="font-size: 17px;" class="mb-0">
                    Através das várias secções, podem ser exploradas diferentes visualizações, que representam e agrupam os dados tendo em conta os tipos de Museus, as regiões de Portugal e o número de visitantes. Interaja com as mesmas, de modo a obter mais informações. </p>
                  <p  style="margin-top: 1em;font-size: 17px;">Os Museus apresentados não correspondem aos 100% dos Museus portugueses em atividade, já que no estudo apenas entraram os que satisfazem os critérios definidos nos inquéritos.                  </p>
                  <a href="https://www.ine.pt/xportal/xmain?xpid=INE&xpgid=ine_publicacoes&PUBLICACOEStipo=ea&PUBLICACOEScoleccao=107703&selTab=tab0&xlang=pt">Aceder ao portal do INE para mais informações.</a>
                </div>
                <a href="#" id="tm_about_link" data-linkid="1" class="tm-link">Ver estatísticas</a>
              </section>
              <!-- Types page -->
              <section class="tm-section tm-section-1 mx-auto">
                <div class="tm-gallery">
                  <div class="btn-group" id="years_buttons" style="display:none">
                    <button id="button2015" class="btn-reg">2015</button>
                    <button id="button2016" class="btn-reg">2016</button>
                    <button id="button2017" class="btn-reg">2017</button>
                    <button id="button2018" class="btn-reg btn-reg-2018">2018</button>
                    <p class="page_description" style="margin-right: 1050px;">Número de Museus e suas características, por tipo e ano.</p>
                  </div> 
                  <svg width="705" height="800" id="svg2"></svg>
                  <svg class="svg_text" width="403" height="650" >
                    <foreignObject y="170" width="320" height="600"> 
                      <div class="text_type" width="320" height="200">
                        <h1 class="title_type" id="title_type">2018: Todos os museus</h1>
                        <p class="description_type" id="description_type">ola dnisdisd dsidsind sdsifsfnuhfishsuf sifnjafnjfnfjnfj ola tudo bem so queria dizer que eu se calhar nao caibo aqui</p>
                      </div>
                    </foreignObject> 
                  </svg> 
                  <svg width="690" height="800" id="svg1"></svg>
                  <div class="container_years">
                </div> 
              </section>
              <!-- Regions page -->
              <section class="tm-section tm-section-2">
                <div class="btn-group_2" id="years_buttons_2" style="display:none">
                  <button class="button_regions btn-reg" id="button2015_2">2015</button>
                  <button id="button2016_2" class="btn-reg">2016</button>
                  <button id="button2017_2" class="btn-reg">2017</button>
                  <button id="button2018_2" class="btn-reg btn-reg-2018">2018</button>
                  <p class="page_description">Número de Museus e dos seus bens, categorizados, por região e ano.</p>
                </div>   
                <svg id="svg_map" xmlns:mapsvg="http://mapsvg.com" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" mapsvg:geoViewBox="-31.265662 42.156380 -6.189321 30.138063"
                width="792.35907" height="470.56802" class="svg_map">
                  <path
                    d="m 196.07297,210.79425 0.28,0.16 -0.02,0.95 1.22,0.98 -0.13,0.22 0.3,0.91 -0.48,-0.12 -1.37,0.24 -0.55,-0.64 -0.54,-0.19 -1.24,0.52 -0.22,-0.23 -0.35,0.22 -0.37,-0.18 -0.62,-1.47 0.07,-0.42 0.42,-0.35 0.82,-0.39 0.37,0.38 0.2,-0.24 0.41,0.15 0.27,-0.39 0.66,-0.12 0.49,0.2 0.38,-0.19 z m -23.01,-35.41 2.06,0.87 0.67,0.96 0.18,0.72 0.4,-0.02 0.15,0.37 1.15,0.3 0.36,-0.22 1.42,0.79 0.11,-0.21 0.67,0.16 1.09,-0.37 1.43,-1.12 0.45,1.1 0.6,-0.11 0.28,0.17 0.24,-0.35 0.23,0.29 0.62,-0.04 0.28,-0.33 0.4,0.09 1.5,-0.7 0.4,-0.57 0.75,0.45 1.09,-0.26 0.7,0.32 2.19,-0.21 0.94,0.36 0.33,0.99 0.03,0.67 -0.31,0.56 0.16,0.86 -0.98,1.22 -1.29,0.28 -1.27,-0.37 -0.77,0.23 -0.41,0.5 -0.29,-0.09 -0.72,0.33 -0.95,-0.06 -0.62,0.39 -1.77,-0.18 -0.5,0.19 -1.3,-0.27 -0.94,0.37 -1.75,-1.42 -0.51,0.1 -1.36,-0.43 -0.46,0.33 -0.53,0.23 -1.37,0.02 -4.45,-3.64 -0.44,-0.98 -0.04,-0.38 0.28,-0.5 0.55,-0.32 0.17,-0.69 0.55,0.11 0.6,-0.49 z m -82.560003,-26.17 0.59,0.06 1.94,0.89 1.07,1.22 1.75,0.34 0.26,0.43 0.94,0.46 0.31,0.53 4.190003,0.78 0.71,0.55 0.2,0.74 -1.67,0.48 -3.080003,-0.38 -0.52,0.51 -1.29,0.55 -0.5,-0.16 -0.11,-0.71 -0.51,-0.35 -2.96,-0.01 -1.58,-0.67 -0.33,0.28 -0.59,0.03 -2.24,-1.26 -0.74,-1.36 0.01,-1.4 0.15,-0.56 1.25,-0.88 0.59,-0.19 0.88,0.21 1.28,-0.13 z m -9.48,-3.46 1.42,0.54 0.47,0.53 0.84,0.26 0.74,0.73 -0.4,1.23 0.27,0.66 -0.73,0.37 0.07,0.89 -0.29,-0.1 0.01,-0.29 -2.39,0.27 -1.42,-0.18 0.05,-0.73 -0.37,-0.99 -0.58,-0.02 -1.54,-1.08 -0.06,-0.52 1.37,-0.33 1.11,0.06 0.83,-1.09 0.6,-0.21 z m 12.67,-4.37 1.35,0.39 5.790003,2.59 0.66,0.21 0.45,0.15 0.67,0.03 1.45,1.12 0.42,0.04 0.96,0.73 0.47,0.36 1.02,0.31 2,1.2 0.76,0.17 1.43,1.12 -0.65,0.5 -1.72,0.08 -3.63,-2.27 -2.52,-0.47 -1.42,-1.07 -1.11,-0.18 -2.670003,-1.38 -0.45,-0.38 -0.56,-0.1 0.1,-0.46 -0.28,-0.04 -0.02,-0.37 -1.55,-0.89 -1.28,-1.31 0.33,-0.08 z m 33.270003,-1.9 0.61,0.13 0.15,0.27 0.34,-0.12 0.08,-0.27 0.4,0.21 0.17,-0.02 1.67,0.29 0.24,0.05 0.21,0.23 0.84,-0.18 1.28,0.98 0.15,0.71 0.45,0.29 -0.44,0.17 -0.11,0.31 0.61,1.14 -0.45,0.44 0,0.31 -0.59,0.25 -0.1,1.11 -0.62,-0.17 -1.39,0.17 -0.82,-0.39 -1.22,-0.01 -0.43,0.05 0.11,0.4 -0.32,0.19 -0.25,-0.23 0.16,-0.43 -1.19,-0.06 -0.28,0.18 -2.34,-1.37 -0.55,-0.78 -0.27,-0.87 -0.06,-0.79 0.23,-0.52 0.08,-0.25 0.24,-0.62 0.95,-0.49 2.46,-0.31 z m -24.64,-11.86 1.2,0.41 1.25,2 0.15,0.98 -0.64,0.17 -0.76,-0.15 -0.44,-0.48 -0.75,0.04 -0.45,-0.4 -0.79,-1.45 0.56,-0.58 0.12,-0.44 0.55,-0.1 z m -97.4400033,-14.63 -0.63,0.77 0.21,0.44 -0.4,0.15 0.03,0.62 -0.64,1.2 -0.73,0.18 -1.84000003,-0.17 -0.28,-0.83 0.23,-0.29 -0.37,-0.59 0.09,-0.78 -0.26,-0.51 0.34,-0.46 -0.06,-1.07 0.79000003,-0.86 -0.1,-0.45 0.89,-0.17 0.22,0.62 0.28,0 -0.07,0.21 0.92,0.23 0.23,-0.22 0.36,1.19 0.39,0.44 0.27,-0.02 0.13,0.37 z m 0.65,-10.99 0.45,0.23 0.16,0.9 -0.19,0.47 -0.95,0.67 -0.32,-1.32 0.2,-0.95 0.65,0 z"
                    title="Açores"
                    id="PT-Aç" class="region region-aç" />
                  <path
                    d="m 711.65297,153.22425 0.4,-0.08 -0.19,0.39 -0.33,-0.05 -0.15,-0.36 0.27,0.1 z m 37.98,-48.77 0.32,0.24 0.02,0.9 0.52,0.68 0.34,1.15 1,0.49 1.17,1.74 1.23,0.18 0.05,1.11 0.35,0.29 -0.1,0.2 0.52,0.38 0.52,-0.26 0.16,0.35 0.66,0.18 0.85,0.6 -0.27,0.88 0.11,1 -0.74,1.4 0.37,0.43 0.14,1.41 2.36,2.31 -0.51,1.11 0.25,1.58 0.82,0.8 2.57,0.93 -0.15,0.77 0.15,0.22 -0.41,0.99 0.29,0.54 0.97,0.36 0.21,-0.25 1.54,-0.52 0.62,0.06 1.4,0.94 0.85,1.6 0.29,1.19 -2.43,4.14 -0.59,0.59 0.57,1.14 -0.2,0.62 -0.9,0.42 -0.99,1.48 -1.06,0.13 -0.71,0.66 -0.37,0.71 -1.02,0.61 -0.44,0.76 -1.57,0.89 -0.39,3.44 0.18,0.42 0.71,0.17 -0.47,0.5 -0.18,0.9 -0.35,0.55 -0.29,0.01 -0.16,0.68 -0.43,0.58 0.02,0.75 -0.42,0.48 -0.21,1.36 0.29,0.19 0.34,-0.35 0.18,0.28 -0.57,0.66 -0.01,0.41 -0.53,0.21 -0.07,0.24 0.58,-0.14 1.15,0.79 0.24,1.11 2.19,2.62 1,1.87 0.54,0.15 0.51,1.91 0.86,1.57 0.82,0.75 0.5,-0.29 0.03,-0.3 0.32,0.01 0.06,0.27 0.36,-0.31 0.45,0.14 0.57,-0.59 -0.04,-0.22 1.02,-0.27 0.27,0.29 0.51,-0.54 0.65,-0.07 -0.04,0.42 0.21,0.14 -1.07,1.33 -0.05,0.55 0.47,0.29 -0.63,1.65 -0.46,0.34 -0.15,1.78 -0.31,0.4 -0.2,1.07 -0.48,-0.1 -1.23,0.25 -0.33,-0.57 -0.94,-0.4 -0.78,0.56 0.06,0.85 -0.19,0.19 -1.24,0.26 -1.04,-0.24 -0.72,0.49 -0.63,0 -0.45,0.32 0.3,0.74 -0.06,0.84 -0.14,0.65 -0.82,1.16 -0.2,1.37 -1.12,1.88 -1.34,0.93 -0.92,1.06 -0.37,-0.08 -0.49,0.37 0.06,0.43 -0.82,1.93 -0.01,1.25 -0.23,0.17 -0.04,0.52 -0.32,0.06 -0.28,0.79 -0.32,0.07 -0.27,0.65 -0.39,0.15 0.23,0.56 -0.53,0.85 0.19,0.39 -0.48,0.18 0.33,1.07 0,0 -0.4,-0.05 -0.57,0.36 -0.99,-0.33 -0.26,0.54 -0.44,0.06 -0.03,0.44 -0.56,0.09 -0.11,0.35 -0.58,-0.36 -0.39,-0.06 -0.38,-0.16 -1.39,0.38 -0.2,-0.12 -0.28,0.35 -0.66,0.07 -0.36,0.44 -0.24,0.01 -0.36,-0.02 -0.41,0.43 -0.25,-0.07 -0.75,0.69 -0.37,0.15 -0.71,0.02 -0.12,0.47 -1.09,0.16 -0.11,0.22 0.22,0.46 -0.36,-0.04 -0.36,0.23 -0.31,0.12 -0.54,0.14 -0.53,0.03 -0.19,-0.25 -0.36,0.31 -0.4,-0.15 -0.07,0.37 -0.41,-0.02 -0.16,0.4 -0.08,0.36 0.22,0.28 0.21,-0.06 0.11,0.37 -1.19,0.41 -0.27,0.61 -0.95,0.66 -0.46,-0.3 -2.1,-0.15 -1.41,-0.41 -1.86,-1.59 -0.82,-0.21 -0.02,-0.35 0,0 0.22,-0.43 0,0 -0.44,-0.9 -0.97,-0.14 -0.88,0.33 -0.55,-0.21 -1.79,0.47 -0.21,0.42 0.07,0.61 -0.27,0.38 -0.59,0.01 -0.14,0.36 -1.51,-0.41 0,0 -0.39,0.21 0,0 -1.79,-1.24 -0.59,0.32 -1.03,0.1 -0.61,0.88 -0.71,-0.93 -0.82,0.16 -1.22,-0.2 -0.12,0.2 -0.56,-1.37 -1.23,-0.15 -0.37,-0.32 0,0 0.06,-1.85 0.38,-1.63 -0.2,-1.08 -0.84,-1.56 0.73,-3 0.03,-1.19 0.42,-0.63 -0.31,0.04 -0.18,-0.7 -0.45,-0.42 0.64,-3.57 -0.21,-2.35 -0.39,-1.29 -1.11,-0.33 -0.67,-0.65 -0.49,0.12 -0.16,-0.25 0.67,-0.76 0.74,-1.49 1.5,-4.57 0.6,-3.44 -0.01,-2.38 -0.34,-2.59 -1.06,-3.02 -2.73,-3.1 0.1,-0.18 0.24,0.14 0.43,0.74 -0.07,-0.59 1.07,1.23 0.62,0.34 0.32,0.99 0.65,0.7 0.35,-0.09 -0.71,-0.86 -0.22,-0.72 0.68,0.18 -0.02,0.27 0.47,-0.1 0.08,-0.13 0.61,0.15 -0.35,0.63 0.28,-0.02 0.24,-0.59 0.77,0.71 1.26,0.13 1.19,0.49 -1.34,-1.52 -0.69,0.1 -0.3,-2.94 0,0 0.83,-0.26 0.77,-0.91 1.23,-0.19 -0.48,-2.43 1.34,-1.44 0.59,-0.23 0.53,-0.86 1.46,-0.91 0.65,-1.36 0.08,-0.64 0.5,-0.69 -1.69,-0.11 0.42,-0.83 1,-0.94 0.91,0.46 0.87,-0.61 0.47,-0.93 0.28,-0.04 0.38,0.46 0.83,-0.68 -0.24,-0.25 0.39,-0.37 1.12,0.69 0.55,-0.69 0.48,0.18 0.26,-0.66 0.25,0.51 0.81,0.55 -0.01,0.42 0.51,0.42 0.61,-0.02 0.35,-0.34 0.67,0.79 -0.15,0.46 0.38,0.18 0.21,-0.31 0.37,0.05 -0.07,0.7 0.35,0.28 0.67,0.05 0.64,-1.17 -0.83,-0.62 -0.26,0.52 -0.24,-0.94 -0.64,-0.35 0.09,-0.47 0.78,-0.68 -0.72,-0.5 -1.31,-0.31 -1.56,-0.76 0.88,-1.3 0.27,-0.78 -0.15,-0.63 0.67,-0.83 -0.24,-0.45 -0.54,0.24 -0.22,-0.43 -0.28,-0.06 -0.29,-1.65 -0.38,0.09 -0.3,-0.4 0.01,-0.83 -1.44,-0.66 -0.26,-0.55 0.38,-0.26 1.04,-1.78 1.42,-0.85 0.68,-0.14 1.14,-1.19 0.43,-0.15 0.13,-0.41 0.91,-0.86 -0.15,-0.71 0.7,-0.78 0.56,-0.05 0.21,0.43 0.97,-0.05 0.3,-0.81 0.64,-0.58 0.27,-0.73 0.44,-0.43 -0.09,-0.9 0.88,-0.18 0.38,-0.65 0.63,0.02 -0.06,0.28 0.36,0.55 1.87,1.16 4.42,-1.99 -0.08,-0.23 0.51,-0.97 -0.66,-0.4 -0.3,0.25 -0.02,-0.26 -0.92,-0.71 -0.08,-0.37 -0.66,-0.08 -0.13,-0.58 -0.59,-0.02 -0.7,-0.64 -0.05,-0.49 0.42,-0.07 0.47,-0.57 0,0 0.42,-0.25 0.46,-0.95 0.83,-0.23 0.82,-0.8 0.43,-0.9 1.05,-0.23 0.34,-0.62 0,0 -0.11,-0.65 0.27,-0.33 0,0 1.18,-0.71 0.73,0.98 0.31,0.1 1.31,-0.73 0.04,-0.41 0.41,-0.31 0.96,-0.01 0.39,-0.29 0,0 -0.1,-0.17 z"
                    title="Alentejo"
                    id="PT-ALE"
                    class="region region-ale" />
                  <path
                    d="m 736.79297,212.18425 1.64,0.39 0.55,-0.33 0.05,0.39 -0.71,0.08 -1.21,-0.31 -0.32,-0.22 z m 3.26,-0.51 -0.89,0.72 -0.02,-0.28 0.45,-0.48 0.49,-0.31 -0.03,0.35 z m 0.71,-0.55 0.08,0.19 -0.54,0.3 0.46,-0.49 z m -0.91,-0.36 0.23,0.22 -0.6,0.12 0.04,-0.29 0.27,-0.22 0.06,0.17 z m 1.06,-0.56 -0.15,0.3 -0.22,-0.21 0.01,0.35 -0.44,0.31 -0.18,-0.39 0.49,-0.34 0.49,-0.02 z m 2.77,-1.17 -2.17,1.6 -0.4,0.04 -0.12,-0.37 0.62,0.04 2.07,-1.31 z m -34,-15.36 0.37,0.32 1.23,0.15 0.56,1.37 0.12,-0.2 1.22,0.2 0.82,-0.16 0.71,0.93 0.61,-0.87 1.03,-0.09 0.59,-0.32 1.79,1.24 0,0 0.39,-0.21 0,0 1.51,0.41 0.14,-0.36 0.59,-0.01 0.27,-0.38 -0.07,-0.6 0.21,-0.42 1.79,-0.47 0.55,0.21 0.88,-0.33 0.97,0.14 0.44,0.9 0,0 -0.21,0.43 0,0 0.02,0.35 0.82,0.21 1.86,1.59 1.41,0.41 2.1,0.15 0.46,0.3 0.95,-0.66 0.27,-0.6 1.19,-0.41 -0.11,-0.37 -0.21,0.06 -0.21,-0.28 0.08,-0.36 0.16,-0.4 0.41,0.02 0.07,-0.37 0.4,0.15 0.36,-0.31 0.19,0.25 0.53,-0.03 0.54,-0.14 0.32,-0.12 0.36,-0.23 0.36,0.04 -0.21,-0.45 0.11,-0.22 1.09,-0.16 0.12,-0.47 0.71,-0.02 0.37,-0.15 0.75,-0.69 0.25,0.07 0.41,-0.43 0.36,0.02 0.24,-0.01 0.36,-0.44 0.66,-0.07 0.28,-0.35 0.2,0.12 1.39,-0.38 0.39,0.16 0.39,0.06 0.58,0.37 0.11,-0.35 0.56,-0.09 0.03,-0.44 0.44,-0.06 0.26,-0.53 0.99,0.33 0.57,-0.36 0.4,0.05 0,0 0.1,0.23 0.59,0.04 0.24,0.97 0.66,0.44 -0.19,0.69 0.41,0.69 -0.02,0.9 0.38,0.41 -0.57,0.37 0.71,0.77 0.12,1.13 -0.28,0.62 0.2,0.61 -0.07,0.79 0.65,1.45 -0.36,0.95 0.62,0.91 0.48,2.55 -0.26,-0.38 -1.98,-0.11 -1.15,0.31 -0.76,0.27 -0.41,0.13 -2.16,1.11 -0.72,0.66 -0.25,0.41 -0.62,0.1 -1.18,0.73 -0.55,0.7 -1.17,0.72 -3.07,0.81 -0.06,0.19 -0.77,-0.07 -0.23,0.42 -0.83,-0.08 -0.23,0.39 -0.62,-0.44 -0.26,0.31 -0.73,0.03 -1.85,-1.02 2.42,2.1 -3.72,-2.83 -1.64,-0.85 0.08,-0.26 -0.25,0.18 -1.78,-0.64 -1.55,0.32 -0.66,-0.14 -1.03,0.55 -0.5,-0.01 -1.93,-1.13 -1.7,0.56 -0.81,0.03 -1.98,-0.58 -0.91,-0.61 -0.85,-0.14 -0.39,0.16 -1.42,-0.31 -1.41,0.64 -0.19,0.24 0.03,0.87 -1.78,-0.29 -2.06,0.95 -0.91,-0.13 -0.72,0.23 -0.71,0.72 -0.22,-0.16 -0.73,0.15 -0.35,0.72 -0.6,0.17 -0.18,0.7 -0.31,-0.12 -0.33,0.46 0.08,-0.5 -0.51,-0.77 -0.62,-0.06 -0.07,0.33 -0.33,-0.2 0.54,-0.8 -0.15,-0.19 0.15,-0.27 0.53,-0.55 0.14,-0.96 0.61,-0.53 1.12,-2.27 -0.3,-0.7 0.11,-0.26 -0.26,-0.26 0.64,-0.32 1.14,-2.52 -0.12,-0.98 -0.35,-0.13 0.13,-0.59 -0.16,-0.4 1.01,-1.19 1.04,-2.24 0.26,-1.54 z"
                    title="Algarve"
                    id="PT-ALG"
                    class="region region-alg" />
                  <path
                    d="m 714.28297,50.724249 1.49,-0.39 0.23,0.44 -0.13,0.75 0.68,1.5 0.05,0.9 0.44,0.64 0.5,-0.09 0.63,-0.66 0.31,0.03 -0.29,1.23 -0.62,0.47 0.3,0.7 0.34,0.09 -0.09,0.45 -0.57,0.47 0.17,0.85 0.97,0.5 -0.3,0.42 0.46,0.46 0.31,-0.11 0.23,-0.77 1.82,-0.18 0.12,0.4 0.47,0.14 0.03,-0.26 0.53,-0.33 0.15,-0.73 0.62,-0.06 1.09,0.93 0.62,-0.41 0.34,0.29 0.86,-0.05 0.27,0.62 0.11,-0.63 0.32,-0.24 0.04,-0.5 0.67,-1.03 -0.52,-1.3 0.79,-0.25 0.72,0.57 0.43,0.07 0.78,-0.81 1.08,0.73 0.8,-0.32 0.13,-0.47 -0.2,-0.65 -0.55,-0.64 0.22,-0.9 -0.36,-1.06 1.41,-1.79 0.71,0.24 0.53,-0.13 0.86,0.85 0.89,-0.15 0.18,-0.23 0.68,-0.03 0.7,-1.52 0.7,-0.39 1.39,-0.14 -0.77,1.17 0.81,0.08 0.8,0.44 0.79,0.99 0.38,0 0.8,-0.82 1.06,0.34 -0.18,0.52 0.25,0.71 1.96,0.12 -0.2,1.27 -0.45,0.96 0.72,1.24 0.3,-0.12 0.54,0.2 -0.04,-0.44 1.01,-0.38 0.77,1.39 0.48,0.4 0.25,-1.1 0.72,-0.69 1.35,0.11 0.2,0.41 0.6,0.26 0.44,0.86 0.46,0.25 0.38,0.58 0.5,-0.43 0.99,-2.14 -0.08,-0.26 -0.66,-0.4 0.22,-1.06 0.39,-0.19 0.58,0.54 0.47,0.03 0.58,-0.83 0.76,-0.38 0.24,-1.37 -0.34,-0.4 -1.23,-0.53 -0.07,-0.83 1.08,0.01 0.33,-0.46 0.71,0.29 1.6,-0.08 0.51,0.37 0.67,-1.05 0.52,-0.13 0.69,0.23 0,0 0.55,0.97 0,0 -0.44,-0.04 -0.12,0.3 0.06,0.72 0.47,0.63 -0.51,1.42 1.45,0.53 0.4,-1.07 0.82,-1.05 1.6,0.3 1.23,-0.46 0.49,-0.38 0.51,-1.29 -0.17,-0.34 0.28,-0.35 1.37,0.22 0,0 0.33,1.09 0.47,0.25 1.5,1.92 0.34,1.07 0.01,0.95 0.56,0.68 0.66,0.11 0.25,0.92 0.01,0.6 -0.81,0.15 0.31,1.55 -0.45,2.2 0.2,0.94 0.41,0.53 0.2,2.03 0.31,0.34 -0.5,1.43 -0.83,1.37 -0.19,0.99 1.32,0.76 -0.12,0.52 0.28,1.06 -0.58,0.49 -1.04,2.11 0.36,1.63 1.73,1.83 -0.38,0.4 0.04,1.04 -2.19,1.34 -0.26,1.45 -1.26,0.4 -1.34,-0.14 -0.41,0.83 -0.43,-0.12 -1,0.57 -0.6,1.64 0.38,0.39 0.02,1.4 0.57,1.03 0.75,-0.08 1.15,0.46 0.56,0.88 0.16,0.72 0.75,0.35 -0.1,0.39 0.44,0.39 0.19,0.98 0.39,0.19 -0.65,1.41 -0.06,1.57 -0.61,0.69 0.24,0.76 -0.22,1.43 -0.19,0.4 -0.61,0.36 -0.67,1.14 -0.68,0.04 -0.37,0.44 -0.13,0.76 0.42,0.88 -0.35,0.380001 -0.19,1.64 -0.77,2.16 -1.58,0.5 -1.85,-0.22 -0.71,0.42 -3.26,-0.56 -1.11,0.23 -1.54,0.83 -1.3,-0.4 -0.85,0.19 -1.68,-0.66 -2.65,-0.09 0,0 -0.39,0.29 -0.96,0.01 -0.41,0.31 -0.04,0.4 -1.3,0.73 -0.32,-0.1 -0.73,-0.98 -1.18,0.7 0,0 -0.26,0.31 0.1,0.67 0,0 -0.34,0.62 -1.05,0.23 -0.43,0.9 -0.82,0.8 -0.83,0.23 -0.46,0.95 -0.43,0.25 0,0 -1.91,-1.59 0,0 -0.8,-0.3 0,0 -0.44,0.29 -0.51,-0.13 -0.52,1.53 -0.68,0.76 0.18,0.7 -0.3,0.25 -0.41,-0.26 -0.69,0.4 -0.67,-0.16 0.19,-2.03 -0.82,-1.09 0.03,-1.79 -0.35,-0.08 -0.01,-0.34 -0.37,-0.43 -1.11,0.13 -0.66,-0.61 -1.75,-0.43 -0.53,-0.4 0.33,-2.38 -0.42,-0.1 0.23,-0.77 -0.22,-0.28 0.31,-0.44 -0.48,-1.430001 -0.7,0.420001 -0.55,-0.390001 -0.06,-0.73 -0.66,0.1 -0.86,-0.29 0.18,0.72 -0.15,0.41 0.27,0.570001 -0.25,0.02 -0.49,-0.680001 -1.04,0.920001 -0.44,-0.36 -0.86,0.29 -0.28,0.58 -0.69,0.37 0.06,-0.87 -0.44,-0.840001 0.02,-1.22 -0.51,-1.39 -0.88,0.76 -0.48,-0.38 -0.65,1.09 -1.38,0.92 -1.52,-0.39 -0.98,0.39 -0.42,0.510001 0.07,1.39 0.36,0.28 -0.3,0.11 -0.15,0.45 1.23,0.5 0.16,0.3 -0.28,0.36 -0.13,0.85 -1.73,0.91 0.47,1.13 0.06,1.39 0.45,0.64 -1.32,1.69 -0.67,-0.64 -0.29,0.36 0.45,1.78 -0.11,0.2 -1.23,0.13 -0.55,-0.21 -1.82,0.35 -0.68,-0.13 -0.48,0.13 -0.16,0.28 -0.44,-0.02 0.49,-2.73 0.69,-1.3 -0.59,-0.62 -0.6,0.4 -0.83,-1.51 -0.09,-0.8 0.66,-0.46 0.04,-0.61 -0.13,-0.31 -0.73,-0.49 0.08,-1.16 -0.43,-0.9 -0.58,-0.23 -0.59,0.65 -0.31,-0.02 -1.39,-1.13 0,0 2.63,-6.900001 2.8,-8.29 0.16,-1.07 -0.24,-0.2 -0.02,-0.18 -0.1,-0.59 -1.03,-0.75 -0.05,-0.37 1.01,-2.64 1.53,-5.22 2.38,-9.97 0.12,-0.78 -0.25,-0.32 1.57,-5.6 z"
                    title="Centro"
                    id="PT-C"
                    class="region region-c" />
                  <path
                    d="m 702.10297,101.24425 1.39,1.13 0.31,0.02 0.59,-0.66 0.58,0.23 0.43,0.9 -0.08,1.17 0.74,0.48 0.13,0.32 -0.04,0.61 -0.66,0.46 0.1,0.8 0.83,1.51 0.6,-0.4 0.59,0.62 -0.7,1.31 -0.49,2.73 0.44,0.02 0.16,-0.28 0.48,-0.13 0.68,0.13 1.82,-0.35 0.55,0.21 1.23,-0.14 0.12,-0.2 -0.45,-1.78 0.29,-0.37 0.67,0.65 1.32,-1.69 -0.44,-0.63 -0.06,-1.39 -0.47,-1.13 1.73,-0.91 0.14,-0.86 0.28,-0.35 -0.17,-0.31 -1.23,-0.49 0.15,-0.46 0.31,-0.11 -0.36,-0.28 -0.07,-1.39 0.42,-0.520001 0.99,-0.39 1.52,0.39 1.38,-0.92 0.65,-1.09 0.48,0.37 0.88,-0.76 0.46,1.41 -0.02,1.22 0.44,0.840001 -0.07,0.87 0.7,-0.38 0.28,-0.58 0.86,-0.29 0.44,0.36 1.03,-0.920001 0.49,0.680001 0.25,-0.02 -0.27,-0.570001 0.15,-0.42 -0.18,-0.72 0.87,0.29 0.66,-0.09 0.06,0.73 0.55,0.390001 0.69,-0.420001 0.48,1.430001 -0.31,0.44 0.21,0.28 -0.23,0.77 0.42,0.1 -0.32,2.38 0.53,0.41 1.75,0.43 0.66,0.6 1.11,-0.13 0.38,0.43 0.01,0.34 0.35,0.08 -0.03,1.8 0.82,1.09 -0.18,2.03 0.66,0.17 0.69,-0.4 0.41,0.26 0.3,-0.25 -0.18,-0.69 0.67,-0.76 0.53,-1.53 0.51,0.13 0.45,-0.29 0,0 0.8,0.29 0,0 1.91,1.6 0,0 -0.47,0.57 -0.42,0.07 0.05,0.49 0.7,0.64 0.59,0.02 0.13,0.58 0.66,0.08 0.08,0.38 0.92,0.71 0.03,0.27 0.3,-0.24 0.66,0.4 -0.5,0.97 0.09,0.23 -4.41,1.99 -1.87,-1.16 -0.36,-0.55 0.06,-0.28 -0.63,-0.02 -0.38,0.65 -0.87,0.18 0.09,0.9 -0.44,0.44 -0.27,0.73 -0.64,0.59 -0.3,0.81 -0.97,0.05 -0.21,-0.43 -0.56,0.05 -0.7,0.78 0.15,0.72 -0.91,0.87 -0.13,0.41 -0.43,0.15 -1.14,1.19 -0.68,0.14 -1.42,0.85 -1.04,1.78 -0.38,0.26 0.26,0.55 1.44,0.66 -0.01,0.83 0.3,0.4 0.39,-0.09 0.29,1.65 0.28,0.06 0.22,0.43 0.54,-0.24 0.24,0.45 -0.67,0.83 0.15,0.63 -0.27,0.79 -0.87,1.3 1.56,0.76 1.31,0.31 0.72,0.5 -0.78,0.68 -0.08,0.47 0.64,0.36 0.24,0.94 0.26,-0.52 0.83,0.62 -0.64,1.17 -0.67,-0.05 -0.35,-0.28 0.07,-0.7 -0.37,-0.05 -0.21,0.31 -0.38,-0.18 0.15,-0.46 -0.67,-0.79 -0.35,0.34 -0.61,0.02 -0.51,-0.42 0.01,-0.42 -0.81,-0.55 -0.25,-0.51 -0.26,0.66 -0.48,-0.18 -0.55,0.69 -1.12,-0.69 -0.38,0.37 0.24,0.25 -0.83,0.68 -0.38,-0.46 -0.28,0.04 -0.46,0.93 -0.87,0.61 -0.91,-0.46 -1,0.94 -0.42,0.84 1.7,0.11 -0.49,0.69 -0.08,0.65 -0.65,1.36 -1.46,0.91 -0.53,0.86 -0.59,0.23 -1.34,1.45 0.48,2.43 -1.23,0.19 -0.77,0.91 -0.83,0.27 0,0 -0.31,-0.26 -0.19,-0.88 -0.62,0.62 -0.73,-0.54 -0.17,0.51 0.47,0.16 -0.27,0.45 -0.85,0.1 0.76,0.05 0.34,-0.25 0.29,0.07 -0.21,0.21 0.71,0.31 -1,0.4 0.27,0.73 -0.28,-0.02 -0.12,0 -0.3,0.02 -0.1,-0.28 0.23,-0.32 -0.37,-0.01 -0.12,-0.01 -2.09,-1.1 -0.69,-0.15 -0.8,0.45 -0.33,0.78 -1.47,0.37 -0.38,0.62 -1.13,0.7 -0.43,-0.02 -0.76,0.45 -1.39,-0.26 -0.14,0.19 -0.04,0.19 -1.77,0.19 -0.75,0.76 -0.84,-0.17 1.08,-2.44 0.17,-2.19 -1.1,-3.48 -1.28,-1.94 0.64,-0.42 1.85,-0.23 1.09,-0.37 -0.05,0.9 1.38,0.66 -0.38,0.18 -0.43,-0.3 -0.14,0.12 0.26,0.23 -0.6,0.06 0.9,0.21 0.26,0.65 0,-0.93 0.43,-0.23 0.52,0.08 0.3,1.07 0.57,0.77 -0.13,-1.05 -0.4,-0.25 0.01,-0.56 -0.81,-0.28 0.01,-0.16 1.02,-0.63 -0.1,-0.24 0.16,-0.11 0.11,0.26 0.45,0 -0.1,-0.32 0.19,-0.02 0.17,-0.03 0.38,-0.02 0.08,0.32 0.2,-0.55 0.52,-0.15 -0.47,-0.11 -0.38,0.33 -0.88,0.02 0.16,-1.06 0.65,-0.36 0.11,-0.29 1.39,-0.6 0.39,-0.42 0.69,-0.02 0.66,-0.33 -0.37,-1.5 -0.63,-1.16 0.42,-0.93 -0.89,0.97 -0.62,-0.86 0.3,-0.56 -0.51,-0.61 0.21,-1.3 -0.17,-0.65 0.49,-0.91 -0.14,-0.13 -1.03,1.7 -0.21,1.1 -0.57,0.86 -0.75,0.44 -0.67,1.35 -0.41,3.14 -0.86,1.36 -3.01,0.78 -0.77,-0.26 -1.21,0.14 -0.98,0.42 -0.31,0.43 -2.1,-1.1 -0.65,-0.04 -0.55,0.46 -1.06,-0.22 -0.78,-0.56 0.4,-0.96 0,-0.64 -0.66,-0.71 -0.19,-0.58 1.56,-3.2 1.11,-3.45 -0.12,-1.65 -0.27,-0.66 0.36,-1.8 -0.16,-1.11 1.97,-3.94 0.6,-2.21 0.11,-2.31 -0.7,-1.59 -0.08,-0.74 -0.34,-0.55 -0.61,0.07 -0.55,-0.35 0.33,-0.37 0.62,0.06 0.25,0.22 0.49,0.12 0.49,-0.3 0.16,-0.23 0.7,-0.25 2.69,-2.3 0.76,-1.51 1,-1.12 0.59,-0.35 0.22,0.02 0.02,0.24 0.28,-0.07 -0.26,-0.67 0.5,-0.26 1.6,-2.41 0.13,-0.46 -0.32,-0.3 -0.01,-0.44 1.35,-5.24 z"
                    title="Lisboa"
                    id="PT-L"
                    class="region region-l" />
                  <path
                    d="m 486.96297,470.25425 -0.55,0.04 0.11,-0.49 0.42,0.08 0.02,0.37 z m -19.14,-83.03 -0.71,-0.53 -0.26,-0.74 0.04,-0.98 0.22,1.31 0.71,0.94 z m -2.45,-6.31 1.26,1.97 0.27,1.65 -0.81,-1.9 -0.62,-0.47 -0.1,-1.25 z m -20.59,-11.08 0.88,0.1 0.43,0.74 0.84,0.7 0.6,0.01 0.41,0.46 1.22,0.28 1.17,-0.28 0.88,-0.55 1.73,0.12 1.02,-0.42 0.92,1.03 0.58,0.1 -0.12,0.36 0.72,0.43 0.45,0.71 1.05,0.05 0.23,0.3 0.38,-0.06 1.54,0.51 0.94,-0.29 0.33,0.55 -0.41,-0.29 -0.33,0.37 -0.57,-0.17 -0.74,0.3 -0.58,0.69 0.12,0.3 -0.4,0.62 -0.53,0.14 -0.42,0.92 -0.86,0.87 -0.65,0.12 -0.6,-0.29 -1.2,-0.07 -1.17,0.53 -0.43,-0.37 -1.47,-0.47 -0.61,0.03 -1.3,-0.48 -0.3,-0.31 -0.95,-0.07 -0.88,-0.8 -2.56,-1.37 -1.05,-1.39 -0.05,-0.79 -0.59,-0.74 2.33,-2.13 z m 25.59,-5.32 0.01,0.58 -0.41,-0.36 0.33,-0.58 0.07,0.36 z m 1.92,-3.52 0.49,0.31 0.34,-0.11 0.07,1.5 -1,-0.06 -1.83,1.41 -0.51,-0.59 0.28,-0.08 0.41,-0.66 -0.01,-0.62 0.73,-0.64 1.03,-0.46 z"
                    title="Madeira"
                    id="PT-M"
                    class="region region-m" />
                  <path
                    d="m 728.95297,1.6242488 0.24,2.79 0.25,0.05 0.68,-0.51 1.24,-0.06 0.52,0.36 0.41,1 -0.13,1.37 -1.29,0.43 -1.04,1.01 -0.41,1.1 -0.63,0.61 -0.66,1.2800002 0.06,0.49 0.46,0.6 -0.06,0.5 0.99,-0.12 0.26,0.86 -0.07,1.52 1.17,0.41 2.28,-0.32 0.56,-0.56 0.76,-0.04 0.3,-0.73 0.84,-1.03 0.93,0.07 0.86,-0.29 0.52,-2.05 0.63,0.2 -0.18,2.56 0.39,0.46 0.49,-0.42 0.51,-0.11 0.06,-0.48 0.31,-0.2 1.43,-0.16 0.99,-0.65 0.66,0.26 1.16,-0.62 1.33,1.03 2.36,0.16 -0.53,0.48 -0.35,1.6 1.37,-0.08 1.31,-0.37 0.63,-0.4 -0.12,-0.64 0.59,-0.25 0.32,0.35 1.05,0.05 0.06,0.76 0.6,0.55 0.02,0.88 0.91,-0.79 0.22,-0.56 0.77,-0.47 0.32,0.44 1.32,-0.09 2.05,-1 0.57,-0.04 0.63,-0.47 0.43,-0.02 0.67,-1.64 -0.41,-0.9600002 0.2,-0.5 -0.19,-0.15 0.04,-0.52 0.28,-0.45 0.67,0.11 0.51,-0.54 1.66,0.69 0.34,0.88 0.28,0.19 0.54,0.01 0.26,-0.3 1.14,0.24 0.29,-0.54 0.62,-0.46 0.68,0.3 0.42,0.94 1.64,0.2 0.8,-0.33 1.24,0.15 0.8,-1.98 0.92,0.22 0.69,1.75 0.71,0.28 1.04,0.1900002 2.41,-0.3000002 0.61,-0.31 0.4,-0.81 1.18,0.95 0.18,0.5300002 -0.8,1.98 1.75,0.63 -0.27,0.43 -0.22,1.07 0.12,0.63 -0.25,0.09 -0.3,1.66 -0.34,1 -0.39,0.38 0.39,0.29 -0.05,0.44 0.27,0.14 -0.17,0.25 0.36,0.73 -0.09,0.2 -0.26,-0.1 0.12,0.54 1.57,1.23 1.32,-0.46 0.44,-0.68 2.08,0.44 0.79,-0.05 1.27,0.48 1.75,1.24 0.72,1.2 0.92,0.39 0.41,0.91 -0.65,0.7 -0.76,1.5 -0.64,0.35 0.15,0.64 -0.44,0.06 0.05,0.4 -0.6,0.31 -0.08,0.5 -0.64,0.74 0.28,0.69 -0.48,0.63 -0.69,0.34 0.47,0.52 0.03,0.47 -1.09,0.35 -0.52,-0.62 -0.68,0.36 -0.09,0.65 0.5,0.42 -0.44,0.35 -0.75,0.12 -0.37,0.56 0.24,0.33 -0.53,0.35 -0.05,0.5 -0.29,0.26 -0.75,-0.02 -0.55,0.41 -0.1,0.26 0.39,0.34 -0.44,0.34 -0.59,0.16 -0.33,-0.45 -0.76,0.7 -0.18,0.53 -0.69,0.3 -0.3,-0.07 -0.23,-0.61 -0.3,0.46 -0.23,-0.21 -0.69,0.26 -0.62,-0.17 -0.13,0.48 -1.2,1.1 0.08,0.38 -0.34,0.35 0.02,0.42 -2.22,2.06 -0.06,0.31 0.48,0.99 -1.04,1.77 -0.65,0.63 0.03,0.32 -1.62,0.4 -1.73,-0.47 -0.52,0.38 0,0 -1.36,-0.22 -0.28,0.35 0.17,0.35 -0.52,1.28 -0.49,0.38 -1.23,0.47 -1.59,-0.3 -0.83,1.05 -0.4,1.07 -1.45,-0.53 0.51,-1.42 -0.47,-0.62 -0.06,-0.72 0.13,-0.3 0.44,0.04 0,0 -0.55,-0.97 0,0 -0.69,-0.22 -0.52,0.13 -0.68,1.05 -0.5,-0.37 -1.6,0.09 -0.71,-0.3 -0.33,0.46 -1.08,-0.01 0.07,0.83 1.23,0.53 0.34,0.4 -0.25,1.37 -0.75,0.38 -0.58,0.82 -0.47,-0.03 -0.58,-0.54 -0.39,0.19 -0.23,1.06 0.67,0.4 0.07,0.26 -0.98,2.14 -0.5,0.42 -0.39,-0.58 -0.46,-0.24 -0.44,-0.86 -0.6,-0.26 -0.2,-0.41 -1.35,-0.11 -0.71,0.69 -0.25,1.09 -0.48,-0.4 -0.77,-1.39 -1.01,0.38 0.03,0.44 -0.53,-0.2 -0.31,0.12 -0.72,-1.24 0.46,-0.96 0.2,-1.27 -1.96,-0.12 -0.26,-0.71 0.19,-0.52 -1.07,-0.33 -0.8,0.82 -0.38,0 -0.79,-0.99 -0.8,-0.44 -0.81,-0.08 0.77,-1.17 -1.39,0.13 -0.7,0.39 -0.69,1.53 -0.68,0.03 -0.19,0.23 -0.89,0.15 -0.86,-0.85 -0.52,0.13 -0.71,-0.25 -1.42,1.8 0.36,1.06 -0.22,0.9 0.55,0.64 0.2,0.65 -0.13,0.47 -0.8,0.32 -1.08,-0.74 -0.78,0.82 -0.43,-0.07 -0.72,-0.57 -0.79,0.25 0.52,1.3 -0.67,1.03 -0.04,0.5 -0.32,0.24 -0.11,0.63 -0.27,-0.62 -0.86,0.05 -0.34,-0.29 -0.62,0.41 -1.09,-0.93 -0.62,0.05 -0.14,0.73 -0.53,0.33 -0.02,0.26 -0.47,-0.13 -0.12,-0.4 -1.82,0.18 -0.24,0.77 -0.31,0.1 -0.46,-0.46 0.3,-0.42 -0.97,-0.49 -0.17,-0.85 0.57,-0.47 0.09,-0.46 -0.33,-0.08 -0.31,-0.7 0.62,-0.48 0.29,-1.23 -0.31,-0.02 -0.63,0.66 -0.5,0.09 -0.44,-0.64 -0.05,-0.91 -0.68,-1.49 0.13,-0.75 -0.23,-0.44 -1.52,0.35 0,0 0.32,-2.27 -0.4,-1.35 -0.38,-3.73 -0.56,-0.75 -0.15,-0.66 -0.4,-0.08 -0.1,0.16 -0.2,-0.2 0.22,-0.47 -0.69,-2.22 0.13,-0.67 -0.52,-2.16 0.03,-1.02 -0.44,-0.33 -0.4,-1.19 -0.07,-0.36 -0.61,-1.45 0.37,-2.69 -0.42,-0.98 -0.17,-2.26 -0.99,-3.91 0.01,-0.95 -0.25,-0.36 -0.39,0.17 -1.04,-3.06 0.15,-2.1 0.28,-0.61 -0.35,-1 0.18,-1.24 0.82,-0.78 0.72,-1.19 1.19,-0.29 1,-0.8500002 0.34,-1.24 2.4,-1.44 0.26,-1.18 0.78,-0.83 0.96,-0.27 1.77,0.04 0.62,-0.35 -0.04,-0.5 0.2,-0.2 2.43,-0.11 0.6,0.42 0.76,-0.35 0.57,0.17 0.58,-0.58 1.01,0.25 0.43,-0.81 0.56,-0.07 0.86,-0.78 0.48,0.07 0.38,-0.73 0.73,0.25 0.62,-0.44 0.2,-0.47 0.28,0.9 z"
                    title="Norte"
                    id="PT-N"
                    class="region region-n" />
                </svg>
                <svg class="svg_text" width="750" height="700" >
                  <foreignObject  y="0" x="50" width="710" height="200"> 
                    <div class="text_regions" width="610" height="400">
                      <h1 class="title_type_2" id="title_type_2">2018: Todos os museus</h1>
                      <p class="description_type_2" id="description_type_2_a">ola</p>
                      <p class="description_type_2" id="description_type_2_b">ola dnisdisd dsidsind </p>
                      <p class="description_type_2" id="description_type_2_c">ola dnisdisd dsidsind </p>
                    </div>
                  </foreignObject> 
                \<svg id="svg_objects" y="250" width="700" height="700"></svg>
                </svg>  
              </section>
              <!-- Visitors page -->
              <section class="tm-section tm-section-3">
                <div class="btn-group_3" id="buttons_visitors" style="display:none">
                  <button id="button_by_regions" class="btn-reg btn-region btn-reg-regions">Por região</button>
                  <button class="btn-reg btn-region" id="button_by_types">Por tipo</button>
                  <p class="page_description" style="margin-left:100px">Número de visitantes dos Museus, por ano e região ou tipo.</p>
                </div>
                <svg class="svg_grouped" id="svg_visitors" ></svg>               
                <svg id="svg_text" width="530" height="650">
                  <foreignObject x="80" width="400" height="90"> 
                    <div class="text_regions_choose">
                        <p>Selecione um ano para ver informações, individualmente.</p>
                    </div>
                  </foreignObject> 
                  <foreignObject id="svg_text_visitors"  y="300" x="70" width="480" height="300"> 
                    <div class="text_regions" width="480" height="300">
                    <h1 class="title_type_3" id="year_visitors">2376276473 Visitantes</h1>
                    <p class="description_type_3" id="number_visitors">ola</p>
                    </div>
                  </foreignObject> 
                </svg> 
              </section>
            </div>         
          </div>         
        </div>        
      </div>
      </div>
      <div class="tm-bottom-container">
        <!-- Footer -->
        <footer>
          || Visualização de Informação, DETI 2020 ||      
        	<a rel="nofollow" href="https://www.ua.pt">Universidade de Aveiro</a> || 
        </footer>
      </div>
    </div>



    <!-- SCRIPTS -->

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="js/background.cycle.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script>


// JS FOR PAGE LOADING AND MENU NAVIGATION

      let previousImageId = 0,
          currentImageId = 0;
      let pageAlign = "right";
      let bgCycle;
      let links;
      let eachNavLink;

      window.onload = function() {
        $("body").addClass("loaded");
      };

      function navLinkClick(e) {
        if ($(e.target).hasClass("external")) {
          return;
        }

        e.preventDefault();

        if ($(e.target).data("align")) {
          pageAlign = $(e.target).data("align");
        }

        previousImageId = currentImageId;
        currentImageId = $(e.target).data("linkid");
        bgCycle.cycleToNextImage(previousImageId, currentImageId);

        $(`.tm-nav-item:eq(${previousImageId})`).removeClass("active");
        $(`.tm-nav-item:eq(${currentImageId})`).addClass("active");

        $(`.tm-section-${previousImageId}`).fadeOut(function(e) {
          $(`.tm-section-${currentImageId}`).fadeIn();
          if (currentImageId === 1) {
            page_types();
          }
          if (currentImageId === 2) {
            page_regions();
          }
          if (currentImageId === 3) {
            page_visitors("regions","");
          }
        });

        adjustFooter();
      }

      $(document).ready(function() {

        $(".tm-section").fadeOut(0);
        $(".tm-section-0").fadeIn();

        bgCycle = $("body").backgroundCycle({
          imageUrls: [
            "img/initial.jpg",
            "img/types.jpg",
            "img/regions_cloro.png",   
            "img/visitors.jpg",
          ],
          fadeSpeed: 1500,
          duration: -1,
          backgroundSize: SCALING_MODE_COVER
        });

        eachNavLink = $(".tm-nav-link");
        links = $(".tm-nav-links");

        $("#tm_about_link").on("click", navLinkClick);
        $("#tm_work_link").on("click", navLinkClick);

        eachNavLink.on("click", navLinkClick);

        $(window).resize(function() {
       
          if (currentImageId == 1) {
            page_types();
          }
          if (currentImageId == 2) {
            page_regions();
          }
          if (currentImageId == 3) {
            page_visitors("regions","");
          }
          adjustFooter();
        });
        adjustFooter();
      }); 

      function adjustFooter() {
        const windowHeight = $(window).height();
        const topHeight = $(".tm-top-container").height();
        const middleHeight = $(".tm-content").height();
        let contentHeight = topHeight + middleHeight;

        if (pageAlign === "left") {
          contentHeight += $(".tm-bottom-container").height();
        }

        if (contentHeight > windowHeight) {
          $(".tm-bottom-container").addClass("tm-static");
        } else {
          $(".tm-bottom-container").removeClass("tm-static");
        }
      }
  

// JS FOR TYPES PAGE

      function page_types() {

        var buttons = document.getElementById("years_buttons");
        buttons.style.display = "block";  
        d3.selectAll("g > *").remove()
        
        $(".btn-reg").removeClass("active")
        $(".btn-reg-2018").addClass("active")

        $(".btn-reg").click(function(){
          $(".btn-reg").removeClass("active");
          $(this).addClass("active");
        });

    ///// TEXT:

        var title= d3.select("#title_type")
        var description = d3.select("#description_type")
        var year="2018"
        var number="431"
        var button_id="button2018"

        update_text("general",number)
          
    ///// PIE CHART:    

        var svg2 = d3.select("#svg2"),
                  width = 470,
                  height = 600,
                  radius = Math.min(width, height) / 2,
                  g2 = svg2.append("g").attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

        var color = d3.scaleOrdinal(["#87431d", "#c87941", "#c7956d", "#c6b497", "#ffa45b", "#d49a89", "#557571","#8db596","#ffa62b","#ffdd93"]);

        var types_2018 = [ {type:"Arte", number: 89},{type:"Arqueologia", number: 43},{type:"Ciências e História Naturais", number: 11},{type:"Ciências e Técnica", number: 32},{type:"Etnografia e Antropologia", number: 62},{type:"Especializados", number: 56},{type:"História", number: 53},{type:"Mistos", number: 62},{type:"Território", number: 17},{type:"Outros", number: 6} ]


        var pie = d3.pie()
            .sort(null)
            .value(function(d) { return d.number; });

        var path = d3.arc()
            .outerRadius(radius - 10)
            .innerRadius(130);

        var label = d3.arc()
            .outerRadius(radius - 40)
            .innerRadius(radius - 40);

        var arc = g2.selectAll(".arc")
            .data(pie(types_2018))
            .enter().append("g")
              .attr("class", "arc");

            arc.append("path")
            .attr("class", "arc")
            .attr("d", path)
            .attr("stroke", "black")
            .style("stroke-width", "2px")
            .style("opacity", 0.7)
            .attr("fill", function(d) { return color(d.data.type); })
            .on("click",function(d) {   // on change type of pie chart

              if (d.data.type=="Arte") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/master/2018/caracteristicas_arte_2018.csv?token=AKVM6GR5G5BE3KJT5VEJKVC74M43K"
                else if (d.data.type=="Arqueologia") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_arq_2018.csv?token=AKVM6GT7XGVMAUS53OJULMK746TLE"
                else if (d.data.type=="Ciências e História Naturais") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_ciencia_2018.csv?token=AKVM6GUD3IVBT4JKDWPVXZK746TMG"
                else if (d.data.type=="Ciências e Técnica") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_tec_2018.csv?token=AKVM6GSCQEMVA3AMWWUXW5C746TQK"
                else if (d.data.type=="Etnografia e Antropologia") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_antro_2018.csv?token=AKVM6GW22CII3OFBPFJU6GC746TJ4"
                else if (d.data.type=="Especializados") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_esp_2018.csv?token=AKVM6GRKJ5S2H5O3NV5ZH7K746TNA"
                else if (d.data.type=="História") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_hist_2018.csv?token=AKVM6GWMAPYUDMRABONEFYK746TOI"
                else if (d.data.type=="Mistos") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_mistos_2018.csv?token=AKVM6GSAZRIEL3CSBQ5I452746T4O"
                else if (d.data.type=="Território") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_terr_2018.csv?token=AKVM6GS5IZERB5VVS5FJ45C746TVC"
                else if (d.data.type=="Outros") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_outros_2018.csv?token=AKVM6GUPBIEVY3JXHHTZGQS746TPS"
            
              update(csv_path)
              update_text(d.data.type,d.data.number)

              var rotate = 90-(d.startAngle + d.endAngle)/2 / Math.PI * 180;
              
                
              g2.transition()
                .attr("transform",  "translate(" + width / 2 + "," + height / 2 + ") rotate(" + rotate + ")")
                .duration(1000);
              
              
              text.transition()
                .attr("transform", function(dd) {
                  return "translate(" + label.centroid(dd) + ") rotate(" + (-rotate) + ")"; })
                .duration(1000);
            
            });
        
        var text = arc.append("text")
              .attr("transform", function(d) { return "translate(" + label.centroid(d) + ")"; })
              .attr("dy", "0.35em")
              .attr("dx", "-41")
              .text(function(d) { return d.data.type; });
              
    ///// DENDROGRAM

        var svg = d3.select("#svg1"),
                width = 655,
                height = 600,
                g = svg.append("g").attr("transform", "translate(-15,57)");      

        var experienceName = ["", "","","","",""];
        var formatSkillPoints = function (d) {
            return experienceName[d % 6];
        }
        var xScale =  d3.scaleLinear()
                .domain([0, 500])
                .range([0, 420]);

        var tree = d3.cluster()                
                .size([height, width - 320])    
                .separation(function separate(a, b) {
                    return a.parent == b.parent           
                    || a.parent.parent == b.parent
                    || a.parent == b.parent.parent ? 0.6 : 0.7;
                });

        var stratify = d3.stratify()           
                .parentId(function(d) { return d.id.substring(0, d.id.lastIndexOf(".")); });
              
        d3.csv("https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/master/2018/caracteristicas.csv?token=AKVM6GSWCMQSVC65UINUWXS74M4UE", row, function(error, data) {
              if (error) throw error;

              var root = stratify(data);
              tree(root);

              var link = g.selectAll(".link")
                      .data(root.descendants().slice(1));
              
              link.enter().append("path")
                      .attr("class", "link")
                      .attr("stroke", "black")
                      .style("stroke-width", "2.5px")
                      .attr("d", function(d) {
                          return "M" + d.y + "," + d.x
                                  + "C" + (d.parent.y + 80) + "," + d.x
                                  + " " + (d.parent.y + 80) + "," + d.parent.x
                                  + " " + d.parent.y + "," + d.parent.x;
                      });

              var node = g.selectAll(".node")
                      .data(root.descendants());
                    
              node.enter().append("g")
                      .attr("class", function(d) { return "node" + (d.children ? " node--internal" : " node--leaf"); })
                      .attr("transform", function(d) { return "translate(" + d.y + "," + (d.x-10) + ")"; });
          
              var leafNodeG = g.selectAll(".node--leaf")
      
              leafNodeG.enter().append("g")
                      .attr("class", "leafNodeG")
                      .attr("transform", "translate(" + 5 + "," + -6 + ")");
              
      
              leafNodeG.append("rect")
                      .attr("class","leafNodeG")
                      .style("fill", function (d) {return d.data.color;})
                      .attr("stroke", "black")
                      .style("stroke-width", "2.5px")
                      .style("opacity", 0.7)
                      .attr("width", 2)
                      .attr("height", 25)
                      .attr("rx", 2)
                      .attr("ry", 4)
                      .transition()
                      .duration(800)
                      .attr("width", function (d) {return xScale(d.data.value);});

              leafNodeG.append("text")
                      .attr("dy", 15.0)
                      .attr("x", 7)
                      .style("text-anchor", "start")
                      .text(function (d) {
                          return d.data.id.substring(d.data.id.lastIndexOf(".") + 1) + " - " + d.data.value;
                      });

      
              var internalNode = g.selectAll(".node--internal");
              internalNode.append("text")
                      .attr("y", -10)
                      .style("text-anchor", "middle")
                      .text(function (d) {
                          return d.data.id.substring(d.data.id.lastIndexOf(".") + 1);
                      });

        })
        
        function row(d) {
            return {
                id: d.id,
                value: +d.value,
                color: d.color
            };
        }

    //// UPDATE PIE CHART

        function update_pie(year){
          
          var types_2018 = [ {type:"Arte", number: 89},{type:"Arqueologia", number: 43},{type:"Ciências e História Naturais", number: 11},{type:"Ciências e Técnica", number: 32},{type:"Etnografia e Antropologia", number: 62},{type:"Especializados", number: 56},{type:"História", number: 53},{type:"Mistos", number: 62},{type:"Território", number: 17},{type:"Outros", number: 6} ]
          var types_2017 = [ {type:"Arte", number: 91},{type:"Arqueologia", number: 45},{type:"Ciências e História Naturais", number: 9},{type:"Ciências e Técnica", number: 33},{type:"Etnografia e Antropologia", number: 61},{type:"Especializados", number: 55},{type:"História", number: 51},{type:"Mistos", number: 62},{type:"Território", number: 15},{type:"Outros", number: 7} ]
          var types_2016 = [ {type:"Arte", number: 84},{type:"Arqueologia", number: 43},{type:"Ciências e História Naturais", number: 8},{type:"Ciências e Técnica", number: 32},{type:"Etnografia e Antropologia", number: 56},{type:"Especializados", number: 51},{type:"História", number: 49},{type:"Mistos", number: 60},{type:"Território", number: 17},{type:"Outros", number: 5} ]
          var types_2015 = [ {type:"Arte", number: 79},{type:"Arqueologia", number: 38},{type:"Ciências e História Naturais", number: 7},{type:"Ciências e Técnica", number: 30},{type:"Etnografia e Antropologia", number: 59},{type:"Especializados", number: 48},{type:"História", number: 48},{type:"Mistos", number: 61},{type:"Território", number: 13},{type:"Outros", number: 5} ]

          if (year=="2018") type=types_2018
          if (year=="2017") type=types_2017
          if (year=="2016") type=types_2016
          if (year=="2015") type=types_2015

          g2.selectAll(".arc").remove()

          var arc = g2.selectAll(".arc")
            .data(pie(type))
            .enter().append("g")
              .attr("class", "arc");

            arc.append("path")
            .attr("d", path)
            .attr("class", "arc")
            .attr("stroke", "black")
            .style("stroke-width", "2px")
            .style("opacity", 0.7)
            .attr("fill", function(d) { return color(d.data.type); })
            .on("click",function(d) {   // on change type of pie chart

              if (year=="2018") {
                if (d.data.type=="Arte") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/master/2018/caracteristicas_arte_2018.csv?token=AKVM6GR5G5BE3KJT5VEJKVC74M43K"
                else if (d.data.type=="Arqueologia") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_arq_2018.csv?token=AKVM6GT7XGVMAUS53OJULMK746TLE"
                else if (d.data.type=="Ciências e História Naturais") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_ciencia_2018.csv?token=AKVM6GUD3IVBT4JKDWPVXZK746TMG"
                else if (d.data.type=="Ciências e Técnica") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_tec_2018.csv?token=AKVM6GSCQEMVA3AMWWUXW5C746TQK"
                else if (d.data.type=="Etnografia e Antropologia") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_antro_2018.csv?token=AKVM6GW22CII3OFBPFJU6GC746TJ4"
                else if (d.data.type=="Especializados") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_esp_2018.csv?token=AKVM6GRKJ5S2H5O3NV5ZH7K746TNA"
                else if (d.data.type=="História") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_hist_2018.csv?token=AKVM6GWMAPYUDMRABONEFYK746TOI"
                else if (d.data.type=="Mistos") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_mistos_2018.csv?token=AKVM6GSAZRIEL3CSBQ5I452746T4O"
                else if (d.data.type=="Território") csv_path=""
                else if (d.data.type=="Outros") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2018/caracteristicas_outros_2018.csv?token=AKVM6GUPBIEVY3JXHHTZGQS746TPS"
              }
              else if (year=="2016") {
                if (d.data.type=="Arte") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2016/caracteristicas_arte_2018.csv?token=AKVM6GRYNAS6OQHRDUVXTRS75DABY"
                else if (d.data.type=="Arqueologia") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2016/caracteristicas_arq_2016.csv?token=AKVM6GUPP67FMXCVQNQF7EK75DABU"
                else if (d.data.type=="Ciências e História Naturais") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2016/caracteristicas_ciencia_2018.csv?token=AKVM6GRA3XMPQTWYCZK7QS275DAB4"
                else if (d.data.type=="Ciências e Técnica") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2016/caracteristicas_tec_2018.csv?token=AKVM6GXBWRATDVMN5TC64EC75DACM"
                else if (d.data.type=="Etnografia e Antropologia") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2016/caracteristicas_antro_2016.csv?token=AKVM6GS2GW2LBRW46KHZMNS75DABQ"
                else if (d.data.type=="Especializados") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2016/caracteristicas_esp_2018.csv?token=AKVM6GWP56S3GPZFCVBX2HC75DAB6"
                else if (d.data.type=="História") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2016/caracteristicas_hist_2018.csv?token=AKVM6GTQGBVJN476W5D77L275DACC"
                else if (d.data.type=="Mistos") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2016/caracteristicas_mistos_2018.csv?token=AKVM6GUQVCZDD2XBGC5PQCC75DACG"
                else if (d.data.type=="Território") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2016/caracteristicas_terr_2018.csv?token=AKVM6GUZVWSLVPCLAYXGZC275DACQ"
                else if (d.data.type=="Outros") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2016/caracteristicas_outros_2018.csv?token=AKVM6GVDTJR5XMXZVQLEQX275DACI"
              }
              else if (year=="2017") {
                if (d.data.type=="Arte") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2017/caracteristicas_arte_2018.csv?token=AKVM6GWSMNABF6ETTXPEMBS75DASC"
                else if (d.data.type=="Arqueologia") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2017/caracteristicas_arq_2016.csv?token=AKVM6GVPCBQLDLYX46RVGJC75DAR6"
                else if (d.data.type=="Ciências e História Naturais") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2017/caracteristicas_ciencia_2018.csv?token=AKVM6GUQ6MBCBJXJC5372RS75DASG"
                else if (d.data.type=="Ciências e Técnica") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2017/caracteristicas_tec_2018.csv?token=AKVM6GWMZZ2KI5AEGYYQC4S75DASY"
                else if (d.data.type=="Etnografia e Antropologia") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2017/caracteristicas_antro_2017.csv?token=AKVM6GS7KDOCI7TZVLDEOI275DARA"
                else if (d.data.type=="Especializados") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2017/caracteristicas_esp_2018.csv?token=AKVM6GT3OT34YABYLECHRNK75DASK"
                else if (d.data.type=="História") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2017/caracteristicas_hist_2018.csv?token=AKVM6GUVXX52JGDJTWYFAWC75DASO"
                else if (d.data.type=="Mistos") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2017/caracteristicas_mistos_2018.csv?token=AKVM6GRA3LGFXHDPVEBE3PC75DASS"
                else if (d.data.type=="Território") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2017/caracteristicas_terr_2018.csv?token=AKVM6GQECEDSDYEV2GWTDBK75DAS2"
                else if (d.data.type=="Outros") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2017/caracteristicas_outros_2018.csv?token=AKVM6GWX4K3VXZSBWDQMEAS75DASU"
              }
              else if (year=="2015") {
                if (d.data.type=="Arte") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/master/2015/caracteristicas_arte_2018.csv?token=AKVM6GU6LJJZPDRA7TMONK274M43W"
                else if (d.data.type=="Arqueologia") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2015/caracteristicas_arq_2015.csv?token=AKVM6GVO2Z6VLFP3CVZSLOC746S3Y"
                else if (d.data.type=="Ciências e História Naturais") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2015/caracteristicas_ciencia_2018.csv?token=AKVM6GTOQQTELZK6ALW6S4S746S6I"
                else if (d.data.type=="Ciências e Técnica") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2015/caracteristicas_tec_2018.csv?token=AKVM6GSZPU734M2SMDVMJM2746S7K"
                else if (d.data.type=="Etnografia e Antropologia") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2015/caracteristicas_antro_2015.csv?token=AKVM6GS6F6Q4ZZJ7HUGFOIC746S4O"
                else if (d.data.type=="Especializados") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2015/caracteristicas_esp_2018.csv?token=AKVM6GSESGVRMWTM3HPFWLK746TC4"
                else if (d.data.type=="História") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2015/caracteristicas_hist_2018.csv?token=AKVM6GSJNLELVR2K5NDS2F2746TDS"
                else if (d.data.type=="Mistos") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2015/caracteristicas_mistos_2018.csv?token=AKVM6GUL5HUGNUNY3BDKRXC746TEM"
                else if (d.data.type=="Território") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/master/2015/caracteristicas_terr_2018.csv?token=AKVM6GVLVLDDZ737DCGHOMC73JZLU"
                else if (d.data.type=="Outros") csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2015/caracteristicas_terr_2018.csv?token=AKVM6GUBGZGYQZOWAC5I6QC746TFS"
              }

              update(csv_path)
              update_text(d.data.type,d.data.number)

              var rotate = 90-(d.startAngle + d.endAngle)/2 / Math.PI * 180;
                
              g2.transition()
                .attr("transform",  "translate(" + width / 2 + "," + height / 2 + ") rotate(" + rotate + ")")
                .duration(1000);
              
              
              text.transition()
                .attr("transform", function(dd) {
                  return "translate(" + label.centroid(dd) + ") rotate(" + (-rotate) + ")"; })
                .duration(1000);
            
            });

            var text = arc.append("text")
              .attr("transform", function(d) { return "translate(" + label.centroid(d) + ")"; })
              .attr("dy", "0.35em")
              .attr("dx", "-41")
              .text(function(d) { return d.data.type; });
              
        }

    //// UPDATE DENDROGRAM

        function update(csv_path) {
    
          d3.csv(csv_path, row, function(error, data) {
            if (error) throw error;

            var root = stratify(data);
            tree(root);

            g.selectAll(".node").remove()
          
            var node = g.selectAll(".node")
                      .data(root.descendants());
                    
                      node.enter().append("g")
                      .attr("class", function(d) { return "node" + (d.children ? " node--internal" : " node--leaf"); })
                      .attr("transform", function(d) { return "translate(" + d.y + "," + (d.x-10) + ")"; });
          
              var leafNodeG = g.selectAll(".node--leaf")
      
                      leafNodeG.enter().append("g")
                      .attr("class", "node--leaf-g")
                      .attr("transform", "translate(" + 5 + "," + -6 + ")");
              
      
              leafNodeG.append("rect")
                    
                      .style("fill", function (d) {return d.data.color;})
                      .attr("width", 2)
                      .attr("height", 20)
                      .attr("rx", 2)
                      .attr("ry", 2)
                      .attr("stroke", "black")
                      .style("stroke-width", "5px")
                      .style("opacity", 0.7)
                      .transition()
                          .duration(2000)
                          .attr("width", function (d) {return xScale(d.data.value);});

              leafNodeG.append("text")
                      .attr("dy", 15.0)
                      .attr("x", 7)
                      .transition()
                          .duration(2000)
                      .style("text-anchor", "start")
                      .text(function (d) {
                          return d.data.id.substring(d.data.id.lastIndexOf(".") + 1) + " - " + d.data.value;
                      });

              var internalNode = g.selectAll(".node--internal");
              internalNode.append("text")
                      .attr("y", -10)
                      .style("text-anchor", "middle")
                      .text(function (d) {
                          return d.data.id.substring(d.data.id.lastIndexOf(".") + 1);
                      });

              var firstEndNode = g.select(".node--leaf");
                  firstEndNode.insert("g")
                          .attr("class","xAxis")
                          .attr("transform", "translate(" + 7 + "," + -14 + ")")
                          .call(xAxis);

            
                  firstEndNode.insert("g")
                          .attr("class", "grid")
                          .attr("transform", "translate(7," + (height - 15) + ")")
                          .call(d3.axisBottom()
                                  .scale(xScale)
                                  .ticks(5)
                                  .tickSize(-height, 0, 0)
                                  .tickFormat("")
                          );


              svg.selectAll(".grid").select("line")
                      .style("stroke-dasharray","40,1")
                      .style("stroke","black");
                    })
        };

    ///// UPDATE TEXT

        function update_text(type,number) {
          if (type=="general") {
            title_text=year+": Todos"
          }
          else {
            title_text=year+": "+type
          }
          description.text(number+" museus")
          title.text(title_text)
        }

    //// IF CHANGE YEAR ON BUTTONS

        var button = d3.select("#button2015")
          .on("click",function(d) { 
            year="2015"
            button_id="button2015"
            number="388"
            g2.transition()
                .attr("transform",  "translate(234,300)")
                .duration(1000);   
            text.transition()
                .attr("transform", function(dd) {
                  return "translate(" + label.centroid(dd) + ")"  })
                .duration(1000);
            csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/master/2015/caracteristicas_2015.csv?token=AKVM6GXQOPF5FCMDRFY444K746UBG"
            update(csv_path)
            update_pie(year)
            update_text("general",number)
          })


        var button = d3.select("#button2016")
          .on("click",function(d) { 
            year="2016"
            button_id="button2016"
            number="405"
            g2.transition()
                .attr("transform",  "translate(234,300)")
                .duration(1000);   
            text.transition()
                .attr("transform", function(dd) {
                  return "translate(" + label.centroid(dd) + ")"  })
                .duration(1000);
            csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2016/caracteristicas_2016.csv?token=AKVM6GRSEMFFEX7OM2QTYV275DA4W"
            update(csv_path)
            update_pie(year)
            update_text("general",number)
          })

        var button = d3.select("#button2017")
          .on("click",function(d) { 
            year="2017"
            button_id="button2017"
            number="430"
            g2.transition()
                .attr("transform",  "translate(234,300)")
                .duration(1000);   
            text.transition()
                .attr("transform", function(dd) {
                  return "translate(" + label.centroid(dd) + ")"  })
                .duration(1000);
            csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/2017/caracteristicas_2017.csv?token=AKVM6GVIEE773CB3GRW7VBS75DAS6"
            update(csv_path)
            update_pie(year)
            update_text("general",number)
          })

        var button = d3.select("#button2018")
          .on("click",function(d) { 
            year="2018"
            button_id="button2018"
            number="431"
            g2.transition()
                .attr("transform",  "translate(234,300)")
                .duration(1000);
                  
            text.transition()
                .attr("transform","translate(234,300)")
                .duration(1000);
                  
            csv_path="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/master/2018/caracteristicas.csv?token=AKVM6GQUYMFKWMPDQIXCIZ2746UCO"
            update(csv_path)
            update_pie(year)
            update_text("general",number)
          })

      }


// JS FOR REGIONS PAGE

      function page_regions() {
      
        var buttons = document.getElementById("years_buttons_2");
        buttons.style.display = "block";

        $(".btn-reg").removeClass("active")
        $(".btn-reg-2018").addClass("active")

        $(".btn-reg").click(function(){
          $(".btn-reg").removeClass("active");
          $(this).addClass("active");
        });

      
        button_id = "button2018_2"
        var svg = d3.select("#svg_map")
        var title= d3.select("#title_type_2")
        var description_a = d3.select("#description_type_2_a")
        var description_b = d3.select("#description_type_2_b")
        var description_c = d3.select("#description_type_2_c")
        var year="2018"

        var data_2018 = {"Portugal":[431,423,8],"Norte":[117,116,1],"Centro":[111,109,2],"Área Metropolitana de Lisboa":[93,93,0], "Alentejo":[59,55,4],"Algarve":[17,16,1],"Região Autónoma dos Açores":[16,16,0],"Região Autónoma da Madeira":[16,18,0]};
        var data_2017 = {"Portugal":[430,422,8],"Norte":[120,119,1],"Centro":[106,105,1],"Área Metropolitana de Lisboa":[85,82,3], "Alentejo":[67,65,2],"Algarve":[17,17,0],"Região Autónoma dos Açores":[16,16,0],"Região Autónoma da Madeira":[19,18,1]};
        var data_2016 = {"Portugal":[405,393,12],"Norte":[115,112,3],"Centro":[100,97,3],"Área Metropolitana de Lisboa":[80,78,2], "Alentejo":[64,62,2],"Algarve":[16,16,0],"Região Autónoma dos Açores":[14,13,1],"Região Autónoma da Madeira":[16,15,1]};
        var data_2015 = {"Portugal":[388,383,5],"Norte":[111,109,2],"Centro":[95,93,2],"Área Metropolitana de Lisboa":[75,75,0], "Alentejo":[64,63,1],"Algarve":[13,13,0],"Região Autónoma dos Açores":[14,14,0],"Região Autónoma da Madeira":[16,16,0]};

        update_text("2018","Portugal")
        update_lolipop_chart("2018","Portugal")

    //// REGION SELECTION ON MAP

        d3.select("#PT-Aç").on("click",function(d) { 
          update_lolipop_chart(year,"Região Autónoma dos Açores")
          update_text(year,"Região Autónoma dos Açores")
        })

        d3.select("#PT-M").on("click",function(d) { 
          update_lolipop_chart(year,"Região Autónoma da Madeira")
          update_text(year,"Região Autónoma da Madeira")
        })

        d3.select("#PT-N").on("click",function(d) { 
          update_lolipop_chart(year,"Norte")
          update_text(year,"Norte")
        })

        d3.select("#PT-C").on("click",function(d) { 
          update_lolipop_chart(year,"Centro")
          update_text(year,"Centro")
        })

        d3.select("#PT-L").on("click",function(d) { 
          update_lolipop_chart(year,"Área Metropolitana de Lisboa")
          update_text(year,"Área Metropolitana de Lisboa")
        })

        d3.select("#PT-ALE").on("click",function(d) { 
          update_lolipop_chart(year,"Alentejo")
          update_text(year,"Alentejo")
        })

        d3.select("#PT-ALG").on("click",function(d) { 
          update_lolipop_chart(year,"Algarve")
          update_text(year,"Algarve")
        })

        var button = d3.select("#button2015_2")
          .on("click",function(d) { 
            year="2015"
            button_id="button2015_2"
            update_text(year,"Portugal")
            update_lolipop_chart(year,"Portugal")
          })

        var button = d3.select("#button2018_2")
          .on("click",function(d) { 
            year="2018"
            button_id="button2018_2"
            update_text(year,"Portugal")
            update_lolipop_chart(year,"Portugal")
          })

        var button = d3.select("#button2017_2")
          .on("click",function(d) { 
            year="2017"
            button_id="button2017_2"
            update_text(year,"Portugal")
            update_lolipop_chart(year,"Portugal")
          })

        var button = d3.select("#button2016_2")
          .on("click",function(d) { 
            year="2016"
            button_id="button2016_2"
            update_text(year,"Portugal")
            update_lolipop_chart(year,"Portugal")
          })

    //// UPDATE TEXT BOX:

        function update_text(year,region) {

            if (year=="2018") {
              description_a.text("Total: "+data_2018[region][0]+" museus")
              description_b.text("Funcionamento permanente: "+data_2018[region][1]+" museus")
              description_c.text("Funcionamento sazonal: "+data_2018[region][2]+" museus")
            }
            else if (year=="2017") {
              description_a.text("Total: "+data_2017[region][0]+" museus")
              description_b.text("Funcionamento permanente: "+data_2017[region][1]+" museus")
              description_c.text("Funcionamento sazonal: "+data_2017[region][2]+" museus")
            }
            else if (year=="2016") {
              description_a.text("Total: "+data_2016[region][0]+" museus")
              description_b.text("Funcionamento permanente: "+data_2016[region][1]+" museus")
              description_c.text("Funcionamento sazonal: "+data_2016[region][2]+" museus")
            }
            else if (year=="2015") {
              description_a.text("Total: "+data_2015[region][0]+" museus")
              description_b.text("Funcionamento permanente: "+data_2015[region][1]+" museus")
              description_c.text("Funcionamento sazonal: "+data_2015[region][2]+" museus")
            }
            title_text=year+": "+region
            title.text(title_text)
        }

    ///// UPDATE LOLLIPOP CHART

        function update_lolipop_chart(year,region) {

          d3.selectAll("g > *").remove()

          var margin = {top: 10, right: 30, bottom: 170, left: 120},
                    width = 760 - margin.left - margin.right,
                    height = 400 - margin.top - margin.bottom;


          var chart_objects = d3.select("#svg_objects")
                              .append("svg")
                                .attr("width", width + margin.left + margin.right)
                                .attr("height", height + margin.top + margin.bottom)
                              .append("g")
                                .attr("transform",
                                      "translate(" + margin.left + "," + margin.top + ")");

          var csv = ""

          if (year=="2018") {
            if (region=="Portugal") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Portugal_2018.csv?token=AMDYSPUUVLRXRTRFNHCX3DC74LHE6"
            else if (region=="Norte") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Norte_2018.csv?token=AMDYSPRINO66LTDOY73MVS274LGMC"
            else if (region=="Centro") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Centro_2018.csv?token=AMDYSPTDEVVY5LJGY5UZ7CC74LIEU"
            else if (region=="Área Metropolitana de Lisboa") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Lisboa_2018.csv?token=AMDYSPUL7LAKVGLO2BBCHK274LIHU"
            else if (region=="Alentejo") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Alentejo_2018.csv?token=AMDYSPQTNEOU3XWMZ3AOZR274LIJG"
            else if (region=="Algarve") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Algarve_2018.csv?token=AMDYSPSYSX5RR6VA2FRL5EC74LILI"
            else if (region=="Região Autónoma dos Açores") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Acores_2018.csv?token=AMDYSPS7MTG3FMXXSU6D6YC74LIO2"
            else if (region=="Região Autónoma da Madeira") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Madeira_2018.csv?token=AMDYSPTYANEQPFSVR7JPLFC74LIQW"
          }

          else if(year=="2017") {
            if (region=="Portugal") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Portugal_2017.csv?token=AMDYSPSQNBQAAKHKFM5EBWS74LI4W"
            else if (region=="Norte") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Norte_2017.csv?token=AMDYSPSSCMG4AQZRYJJUARK74LI6I"
            else if (region=="Centro") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Centro_2017.csv?token=AMDYSPU5CT3QWEAD6Z6RDR274LI7K"
            else if (region=="Área Metropolitana de Lisboa") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Lisboa_2017.csv?token=AMDYSPWASEZOV643SFVWXI274LJOU"
            else if (region=="Alentejo") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Alentejo_2017.csv?token=AMDYSPUJ2LAYKRMMVQKC3MK74LJRA"
            else if (region=="Algarve") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Algarve_2017.csv?token=AMDYSPTFUVIRZUUIKZ3CNTC74LJSI"
            else if (region=="Região Autónoma dos Açores") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Acores_2017.csv?token=AMDYSPVUYCSL2DGYZT255PC74LJTS"
            else if (region=="Região Autónoma da Madeira") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Madeira_2017.csv?token=AMDYSPQAYFQKKNTYWS47RCS74LJVA"
            
          }

          else if(year=="2016") {
            if (region=="Portugal") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Portugal_2016.csv?token=AMDYSPVFTUKOULAJCPQZTPC74LJ24"
            else if (region=="Norte") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Norte_2016.csv?token=AKVM6GR234KAK67MWX7D72C74M32U"
            else if (region=="Centro") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Centro_2016.csv?token=AMDYSPU6S5UIYZYMQWXDCM274LJ7O"
            else if (region=="Área Metropolitana de Lisboa") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Lisboa_2016.csv?token=AMDYSPWGYISYL77ICZXBBB274LKAU"
            else if (region=="Alentejo") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Alentejo_2016.csv?token=AMDYSPSHBAOL3SYYAAFOZ3K74LKBW"
            else if (region=="Algarve") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Algarve_2016.csv?token=AMDYSPXH72R2SSA5JIXYJF274LKC4"
            else if (region=="Região Autónoma dos Açores") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Acores_2016.csv?token=AMDYSPVOT2S5XSLDZ7WVC2274LKEE"
            else if (region=="Região Autónoma da Madeira") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Madeira_2016.csv?token=AMDYSPQCUSOUBXWCW67E63274LKFG"
            
          }

          else if(year=="2015") {
            if (region=="Portugal") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Portugal_2015.csv?token=AMDYSPSBAP5CYXPQ4ZCEQ7C74LKGO"
            else if (region=="Norte") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Norte_2015.csv?token=AMDYSPU4C6SIFW5HQ2QKJG274LKIO"
            else if (region=="Centro") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Centro_2015.csv?token=AMDYSPQJ5HV2646R56E5RTC74LKJQ"
            else if (region=="Área Metropolitana de Lisboa") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Lisboa_2015.csv?token=AMDYSPW52AMR5ZDOVFT5ZDS74LKK2"
            else if (region=="Alentejo") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Alentejo_2015.csv?token=AMDYSPTPRRZSITDVF6XUVBK74LKMC"
            else if (region=="Algarve") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Algarve_2015.csv?token=AMDYSPVKKSZCF22YL3HCHFC74LKNG"
            else if (region=="Região Autónoma dos Açores") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Acores_2015.csv?token=AMDYSPQOZOWTURTX7HLNBX274LKOQ"
            else if (region=="Região Autónoma da Madeira") csv="https://raw.githubusercontent.com/alina-yanchuk02/vi_csvs/new_version_alina/bens/Bens_Madeira_2015.csv?token=AMDYSPVIEIKFOFWURJDNIJ274LKQS"
          }

          d3.csv(csv, function(data) {

            var x = d3.scaleBand()
              .range([ 0, width ])
              .domain(data.map(function(d) { return d.Type; }))
              .padding(4);

            chart_objects.append("g")
              .attr("transform", "translate(0," + height + ")")
              .call(d3.axisBottom(x))
              .selectAll("text")
                .attr("transform", "translate(-10,0)rotate(-45)")
                .style("text-anchor", "end");

            var y = d3.scaleLinear()
              .domain([0, 8000000])
              .range([ height, 0]);

            chart_objects.append("g")
              .call(d3.axisLeft(y));

            chart_objects.selectAll("myline")
              .data(data)
              .enter()
              .append("line")
              .transition()
                .attr("x1", function(d) { return x(d.Type); })
                .attr("x2", function(d) { return x(d.Type); })
                .attr("y1", function(d) { return y(d.Value); })
                .attr("y2", y(0))
                .attr("stroke", "grey")
                .style("stroke-width", "2px")

            chart_objects.selectAll("mycircle")
              .data(data)
              .enter()
              .append("circle")
                .attr("cx", function(d) { return x(d.Type); })
                .attr("cy", function(d) { return y(d.Value); })
                .attr("r", "10")
                .style("fill", "rgb(224, 101, 101)")
                .on("mouseover", function(d){
                      d3.select(this).style("fill", "#bedbbb");
                })
                .on("mouseout", function(d){
                      d3.select(this).style("fill", "rgb(224, 101, 101)");
                })
                .attr("stroke", "black")
                .style("stroke-width", "0px")
                .append("title")
                    .text(function(d) { return d.Value+" bens"})
                    
            })

        }

      }
      

// JS FOR VISITORS PAGE

      function page_visitors(type,filtered) {

        d3.selectAll("g > *").remove()

        var buttons = document.getElementById("buttons_visitors");
        buttons.style.display = "block";
        $("#svg_text_visitors").hide();

        if (type=="regions") {
          $(".btn-reg").removeClass("active")
          $(".btn-reg-regions").addClass("active")
        }

        $(".btn-reg").click(function(){
          $(".btn-reg").removeClass("active");
          $(this).addClass("active");
        });

        var data_regions = {labels: ["Norte","Centro","Área Metropolitana de Lisboa","Alentejo","Algarve","Região Autónoma dos Açores","Região Autónoma da Madeira"],
                    series: [
                    {
                      label: '2015',
                      values: [4132597,1589612,6559141,595164,361037,203283,219834]
                    },
                    {
                      label: '2016',
                      values: [4567440,1835230,7366513,857952,434513,241682,229049]
                    },
                    {
                      label: '2017',
                      values: [5179402,1992499,8007593,927230,544545,260975,262742]
                    },
                    {
                      label: '2018',
                      values: [5842377,2423503,9295543,873018,586702,261792,211171]
                    },]
                    };

        var data_types = {labels: ["Arte","Arqueologia","Ciências e História Naturais","Ciências e Técnica","Etnografia e Antropologia","Especializados","História","Mistos","Território","Outros"],
                    series: [
                    {
                      label: '2015',
                      values: [3245675,930845,107899,937939,440068,2664788,3494298,1033876,415311,390515]
                    },
                    {
                      label: '2016',
                      values: [4749981,1103895,110798,809451,434176,2340204,3876391,1128212,568207,411064]
                    },
                    {
                      label: '2017',
                      values: [5155000,1242850,123033,934015,510466,2351111,4519158,1267979,576574,494800]
                    },
                    {
                      label: '2018',
                      values: [5416374,1225883,454494,1046674,763828,2225793,2225793,1651647,1050275,442721]
                    },]
                    };
        

        var barHeight;
        var color;
        var gapBetweenGroups;

    ///// FILTERING BY YEAR:

        if(filtered=="2015") {
          data_types.series.splice(1,3)
          data_regions.series.splice(1,3)
          barHeight = 40
          color = d3.scaleOrdinal(["#87431d"]);
          gapBetweenGroups = 20
        }

        if(filtered=="2016") {
          data_types.series.splice(0,1)
          data_types.series.splice(1,2)
          data_regions.series.splice(0,1)
          data_regions.series.splice(1,2)
          barHeight = 40
          color = d3.scaleOrdinal(["#d49a89"]);
          gapBetweenGroups = 20
        }
        
        if(filtered=="2017") {
          data_types.series.splice(0,2)
          data_types.series.splice(1,1)
          data_regions.series.splice(0,2)
          data_regions.series.splice(1,1)
          barHeight = 40
          color = d3.scaleOrdinal(["#8db596"]);
          gapBetweenGroups = 20
        }

        if(filtered=="2018") {
          data_types.series.splice(0,3)
          data_regions.series.splice(0,3)
          barHeight = 40
          color = d3.scaleOrdinal(["#ffa62b"]);
          gapBetweenGroups = 20
        }

        if (filtered=="") {
          if (type=="types") barHeight = 13
          else barHeight = 18
          gapBetweenGroups = 11
          color = d3.scaleOrdinal(["#87431d","#d49a89","#8db596","#ffa62b"]);
        }
      

        var groupedData_regions = [];
        for (var i=0; i<data_regions.labels.length; i++) {
          for (var j=0; j<data_regions.series.length; j++) {
            groupedData_regions.push(data_regions.series[j].values[i]);
          }
        }

        var groupedData_types = [];
        for (var i=0; i<data_types.labels.length; i++) {
          for (var j=0; j<data_types.series.length; j++) {
            groupedData_types.push(data_types.series[j].values[i]);
          }
        }
        
        if(type=="regions") {
          data = data_regions
          groupedData = groupedData_regions
        }
        else {
          data = data_types
          groupedData = groupedData_types
        }


        var chartWidth = 500, groupHeight = barHeight * data.series.length, spaceForLabels = 150, spaceForLegend = 50;

        var groupedData = [];
        for (var i=0; i<data.labels.length; i++) {
          for (var j=0; j<data.series.length; j++) {
            groupedData.push(data.series[j].values[i]);
          }
        }

        var chartHeight = barHeight * groupedData.length + gapBetweenGroups * data.labels.length;
                
        var x = d3.scaleLinear()
                .domain([0, d3.max(groupedData_types)])
                .range([0, chartWidth]);
        

                
        var y = d3.scaleLinear()
                .range([chartHeight + gapBetweenGroups, 0]);

    //// GROUPED CHART:

        var chart = d3.select("#svg_visitors")
                    .attr("width", spaceForLabels + chartWidth + spaceForLegend+400)
                    .attr("height", chartHeight);
        

        g3 = chart.append("g").attr("transform","translate(130,10)")
      
        var bar = g3.selectAll("g")
                    .data(groupedData)
                    .enter().append("g")
                    .attr("transform", function(d, i) {
                      return "translate(" + spaceForLabels + "," + (i * barHeight + gapBetweenGroups * (0.5 + Math.floor(i/data.series.length))) + ")";
                    });

        bar.append("text")
                    .attr("class", "label")
                    .attr("x", function(d) { return - 10; })
                    .attr("y", groupHeight / 2)
                    .attr("dy", ".35em")
                    .text(function(d,i) {
                      if (i % data.series.length === 0)
                        return data.labels[Math.floor(i/data.series.length)];
                      else
                        return ""}); 

        bar.append("rect")
                    .attr("fill", function(d,i) { return color(i % data.series.length); })
                    .attr("class", "bar")
                    .attr("width", x)
                    .attr("height", barHeight - 1)
                    .attr("stroke", "black")
                    .style("stroke-width", "2px")
                    .style("opacity", 0.8)
                    .append("title")
                    .text(function(d) { return d+" visitantes"; });
                
    ///// LEGEND:
                
        var legendRectSize = 38,
        legendSpacing  = 10;
                
        var legend = chart.selectAll('.legend')
                    .data(data.series)
                    .enter()
                    .append('g')
                    .attr('transform', function (d, i) {
                        var height = legendRectSize + legendSpacing;
                        var offset = -gapBetweenGroups/2;
                        var horz = spaceForLabels + chartWidth + 370 - legendRectSize;
                        var vert = i * height - offset;
                        return 'translate(' + horz + ',' + vert + ')';
                    });
                
        legend.append('rect')
                    .attr('width', legendRectSize)
                    .attr('height', legendRectSize)
                    .style('fill', function (d, i) { return color(i); })
                    .style('stroke', function (d, i) { return color(i); })
                    .on("click", function(d) {
                      page_visitors(type,d.label)
                      $("#svg_text_visitors").show();
                      d3.select("#year_visitors").text("Total:")
                      d3.select("#number_visitors").text(d.values.reduce((a, b) => a + b)+" visitantes")
                    })
                    .on("mouseover", function(d){
                      d3.select(this).style("fill", function() {
                          return d3.rgb(d3.select(this).style("fill")).darker(0.6);
                      });
                    })
                    .on("mouseout", function(d){
                      d3.select(this).style("fill", function() {
                          return d3.rgb(d3.select(this).style("fill")).brighter(0.6);
                      });
                    });
                    
                
        legend.append('text')
                    .attr('class', 'legend')
                    .attr('x', legendRectSize + legendSpacing)
                    .attr('y', legendRectSize - legendSpacing)
                    .text(function (d) { return d.label; });         
              
    //IF CHANGE BUTTON BY REGIONS / BY TYPES

          var button = d3.select("#button_by_regions")
          .on("click",function(d) { 
            page_visitors("regions","")
          })

          var button = d3.select("#button_by_types")
          .on("click",function(d) { 
            page_visitors("types","")
          })
            
      }

    </script>
  </body>
</html>
